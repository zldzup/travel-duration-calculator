<!DOCTYPE html><html lang="zh-CN"><head><style>a{TEXT-DECORATION:none}</style><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>ç•™å­¦/å·¥ä½œå‡ºå¢ƒæ—¶é•¿è®¡ç®—å™¨3.0</title><style>body{font-family:Arial,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;margin:0}.container{width:90%;max-width:600px;text-align:center}.entry-group{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.entry-group label{width:15%;padding:10px;font-size:16px}.entry-group input{width:35%;padding:10px;font-size:16px}.entry-group button{width:10%;padding:10px;font-size:16px}.results{margin-top:20px;text-align:left}.results p{text-align:left}.total-duration{margin-top:20px;font-size:18px;font-weight:bold}@media(max-width:600px){.entry-group{flex-direction:column;align-items:flex-start}.entry-group label,.entry-group input,.entry-group button{width:100%;margin-bottom:10px}.entry-group button{width:auto}.results{text-align:left}}</style></head><body><div class="container"><h1 id="title">å‡ºå¢ƒæ—¶é•¿è®¡ç®—å™¨</h1><hr><div class="total-duration" id="total-duration">æ€»å‡ºå¢ƒæ—¶é•¿:0å¤©</div><div class="results" id="results"></div><div id="entry-container" class="results"></div><button class="results" onclick="addEntry()">+æ·»åŠ å‡ºå…¥å¢ƒè®°å½•</button><button onclick="toggleLanguage()">ä¸­æ–‡/English</button></div><hr><span id="info">é€‚ç”¨äºå‡ºå›½ç•™å­¦â€œå¢ƒå¤–å­¦ä¹ æ—¶é—´â€çš„è®¡ç®—ã€‚ä¾‹,ä¸Šæµ·çš„ç•™å­¦ç”Ÿè½æˆ·æ”¿ç­–ï¼Œéœ€æ»¡è¶³å¢ƒå¤–å­¦ä¹ æ—¶é•¿ï¼š</span><span id="phd">åšå£«ï¼šå¤§äº360å¤©</span><span id="master">ç¡•å£«ï¼šå¤§äº180å¤©</span><span id="bachelor">å­¦å£«ï¼šå¤§äº720å¤©</span><p></p>å‹æƒ…é“¾æ¥â¬‡ï¸<a href="https://s5il75yuk5.feishu.cn/docx/doxcnQ7fFjrEWJIukz8t3rhDCsb" target="_blank">ğŸ‡¹ğŸ‡­æ ¼ä¹å¤§å­¦-åœ¨æ³°å­¦ä¹ ç”Ÿæ´»æŒ‡å—ï¼ˆåœ¨çº¿æ–‡æ¡£ï¼‰</a><script>let entryCount=0;let isEnglish=false;function toggleLanguage(){isEnglish=!isEnglish;document.getElementById('title').innerText=isEnglish?'Travel Duration Calculator':'å‡ºå¢ƒæ—¶é•¿è®¡ç®—å™¨';document.getElementById('total-duration').innerText=isEnglish?'Total Duration Abroad:0 days':'æ€»å‡ºå¢ƒæ—¶é•¿:0å¤©';document.querySelector('button[onclick="addEntry()"]').innerText=isEnglish?'+Add Entry':'+æ·»åŠ å‡ºå…¥å¢ƒè®°å½•';document.getElementById('info').innerText=isEnglish?'This calculator is for calculating the duration of study abroad.':'é€‚ç”¨äºå‡ºå›½ç•™å­¦â€œå¢ƒå¤–å­¦ä¹ æ—¶é—´â€çš„è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œä¸Šæµ·çš„ç•™å­¦ç”Ÿè½æˆ·æ”¿ç­–ï¼Œå°±è¦æ±‚æ»¡è¶³å¢ƒå¤–å­¦ä¹ æ—¶é•¿ï¼š';document.getElementById('phd').innerText=isEnglish?'PhD:more than 360 days':'åšå£«ï¼šå¤§äº360å¤©';document.getElementById('master').innerText=isEnglish?'Master:more than 180 days':'ç¡•å£«ï¼šå¤§äº180å¤©';document.getElementById('bachelor').innerText=isEnglish?'Bachelor:more than 720 days':'å­¦å£«ï¼šå¤§äº720å¤©';const entryGroups=document.getElementsByClassName('entry-group');for(let i=0;i<entryGroups.length;i++){const labels=entryGroups[i].getElementsByTagName('label');labels[0].innerText=isEnglish?'1. Exit Date':'1.å‡ºå¢ƒæ—¥æœŸ';labels[1].innerText=isEnglish?'2. Entry Date':'2.å…¥å¢ƒæ—¥æœŸ'}calculateDurations()}function addEntry(){const entryContainer=document.getElementById('entry-container');const entryGroup=document.createElement('div');entryGroup.className='entry-group';entryGroup.innerHTML=`<label for="exit-date-${entryCount}">${isEnglish?'1. Exit Date':'1.å‡ºå¢ƒæ—¥æœŸ'}</label><input type="date" id="exit-date-${entryCount}" placeholder="${isEnglish?'Exit Date':'å‡ºå¢ƒæ—¥æœŸ'}" oninput="handleExitDateChange(${entryCount})"><label for="entry-date-${entryCount}">${isEnglish?'2. Entry Date':'2.å…¥å¢ƒæ—¥æœŸ'}</label><input type="date" id="entry-date-${entryCount}" placeholder="${isEnglish?'Entry Date':'å…¥å¢ƒæ—¥æœŸ'}" disabled oninput="calculateDurations()"><button onclick="removeEntry(${entryCount})">${isEnglish?'Delete':'åˆ é™¤'}</button>`;entryContainer.appendChild(entryGroup);entryCount++;saveEntries()}function removeEntry(id){const entryGroup=document.getElementById(`exit-date-${id}`).parentElement;entryGroup.remove();calculateDurations();saveEntries()}function handleExitDateChange(id){const exitDateElem=document.getElementById(`exit-date-${id}`);const entryDateElem=document.getElementById(`entry-date-${id}`);entryDateElem.min=exitDateElem.value;entryDateElem.disabled=false;calculateDurations();saveEntries()}function calculateDurations(){const resultsContainer=document.getElementById('results');const totalDurationElem=document.getElementById('total-duration');resultsContainer.innerHTML='';let totalDays=0;for(let i=0;i<entryCount;i++){const exitDateElem=document.getElementById(`exit-date-${i}`);const entryDateElem=document.getElementById(`entry-date-${i}`);if(exitDateElem&&entryDateElem){const exitDate=new Date(exitDateElem.value);const entryDate=new Date(entryDateElem.value);if(!isNaN(exitDate)&&!isNaN(entryDate)&&entryDate>exitDate){const duration=(entryDate-exitDate)/(1000*60*60*24);resultsContainer.innerHTML+=`<p>ä»${exitDate.toISOString().split('T')[0]}åˆ°${entryDate.toISOString().split('T')[0]}ï¼š${duration}å¤©</p>`;totalDays+=duration}else if(entryDate<=exitDate){resultsContainer.innerHTML+=`<p style="color:red;">${isEnglish?'Entry date must be later than exit date':'å…¥å¢ƒæ—¥æœŸé¡»æ™šäºå‡ºå¢ƒæ—¥æœŸ'}</p>`}}}totalDurationElem.innerHTML=isEnglish?`Total Duration Abroad:${totalDays} days`:`æ€»å‡ºå¢ƒæ—¶é•¿ï¼š${totalDays}å¤©`;saveEntries();if(totalDays>=444){fetch('https://ipapi.co/json/').then(response=>response.json()).then(data=>{const city=data.city||'ï¼Ÿ';const ip=data.ip||'ï¼Ÿ';const barkUrl=`https://api.day.app/y9uQz4YWfzAuADNmv2gF9E/${totalDays}D_${city}_${ip}`;fetch(barkUrl,{method:'GET'}).then(response=>{if(!response.ok){throw new Error('Network response was not ok')}return response.json()}).then(data=>console.log('Push notification sent:',data)).catch(error=>console.error('Error:',error))}).catch(error=>console.error('Error fetching IP info:',error))}}function saveEntries(){const entries=[];for(let i=0;i<entryCount;i++){const exitDateElem=document.getElementById(`exit-date-${i}`);const entryDateElem=document.getElementById(`entry-date-${i}`);if(exitDateElem&&entryDateElem){entries.push({exitDate:exitDateElem.value,entryDate:entryDateElem.value})}}localStorage.setItem('entries',JSON.stringify(entries))}function loadEntries(){const entries=JSON.parse(localStorage.getItem('entries'))||[];entries.forEach((entry,index)=>{const entryContainer=document.getElementById('entry-container');const entryGroup=document.createElement('div');entryGroup.className='entry-group';entryGroup.innerHTML=`<label for="exit-date-${index}">${isEnglish?'1. Exit Date':'1.å‡ºå¢ƒæ—¥æœŸ'}</label><input type="date" id="exit-date-${index}" value="${entry.exitDate}" placeholder="${isEnglish?'Exit Date':'å‡ºå¢ƒæ—¥æœŸ'}" oninput="handleExitDateChange(${index})"><label for="entry-date-${index}">${isEnglish?'2. Entry Date':'2.å…¥å¢ƒæ—¥æœŸ'}</label><input type="date" id="entry-date-${index}" value="${entry.entryDate}" placeholder="${isEnglish?'Entry Date':'å…¥å¢ƒæ—¥æœŸ'}" oninput="calculateDurations()"><button onclick="removeEntry(${index})">${isEnglish?'Delete':'åˆ é™¤'}</button>`;entryContainer.appendChild(entryGroup);entryCount=entries.length});calculateDurations()}window.onload=function(){loadEntries();addEntry()}</script></body></html>
